<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8" />
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <title>Document</title>
    </head>
    <body>
        <script>
            // 배 타고 섬 탈출할 시간 계산
            let 대기인원 = 14000605;
            /*
           - 매일 9시부터 21시까지 배 운항
           - 10분 단위로 배가 들어와 15명씩 탑승하고 정시에는 25명 씩 가능
           - 1월부터 10월까지 배 운항
           - 1월은 1024일 2월은 512일 3월은 256일 4월은 128일 ~ 10월은 2일인 세계관이다. 
           - 시간 흐름은 현실세계와 같음                  
    9시      25   25
    9시 10분 15   40
    9시 20분 15   55
    9시 30분 15   70
    9시 40분 15   85
    9시 50분 15   100
    100명씩 12시간 : 1200명
    */

            console.log(`걸린일수: ${대기인원 / 1200}`); // 걸린 일수
            let 일년일수 = 0;
            for (var i = 1; i < 11; i++) {
                일년일수 += 2 ** i;
            }
            console.log(`걸린연도: ${대기인원 / 1200 / 일년일수}`); //걸린 연도
            console.log(`걸린연도를 뺸 나머지 일수: ${(대기인원 / 1200) % 일년일수}`); //걸린 연도를 뺀 나머지 일수

            let 걸린월수 = 0;
            let 나머지일수 = (대기인원 / 1200) % 일년일수;
            console.log(`걸린연도를 뺸 나머지 일수(계산 전): ${나머지일수}`); //걸린 연도를 뺀 나머지 일수
            for (var i = 10; i > 0; i--) {
                걸린월수++;
                if (나머지일수 < 2 ** i) {
                    break;
                }
                나머지일수 = 나머지일수 - 2 ** i;
            }
            console.log(`걸린연도, 걸린월수를 뺸 나머지 일수(계산 후): ${나머지일수}`); //걸린 연도를 뺀 나머지 일수
            console.log(`걸린월수: ${걸린월수}`); //걸린월수

            console.log(`시간: ${(대기인원 % 1200) / 100 + 9}`); // 시간

            let 출발분 = [25, 40, 55, 70, 85, 100];
            let 최종계산된분 = 0;

            for (let variable in 출발분) {
                if (출발분[variable] > (대기인원 % 1200) % 100) {
                    최종계산된분 = variable * 10;
                    break;
                }
            }
            console.log(`최종계산된분: ${최종계산된분}`); // 최종계산된분

            let date = new Date();
            console.log(date);
            if (최종계산된분 + date.getMinutes() > 60) {
                최종계산된분 += date.getMinutes() - 60;
                //시간에도 +1 해야 한다.
            }
            console.log(`최종계산된분: ${최종계산된분 + date.getMinutes()}`); // 최종계산된분

            //////////////////함수로 정리//////////////////////////////////////////////////////////////////////////////////

            function 배를건너는시간(대기인원) {
                let 연 = 0,
                    월 = 0,
                    일 = 0,
                    시 = 0,
                    분 = 0;

                //1. 년

                let 걸린일수 = 대기인원 / 1200; // 걸린 일수
                let 일년일수 = 0;
                for (var i = 1; i < 11; i++) {
                    일년일수 += 2 ** i;
                }
                년 = parseInt(대기인원 / 1200 / 일년일수, 10); //걸린 연도



                //2. 일, 월, 시
                let 나머지일수 = (대기인원 / 1200) % 일년일수;
                let 걸린월수 = 0;
                for (var i = 10; i > 0; i--) {
                    걸린월수++;
                    if (나머지일수 < 2 ** i) {
                        break; //나머지일수가 월 수에 범위안에 있어 break 한 월이 탑승 월.
                    }
                    나머지일수 = 나머지일수 - 2 ** i;
                }
                일 = parseInt(나머지일수, 10);
                월 = parseInt(걸린월수, 10);
                시 = parseInt((대기인원 % 1200) / 100 + 9, 10); // 시간 =>  9시부터 9시50분까지 태우는 인원 100명 기준 //9시 탑승 시작




                //3. 분
                let 출발분 = [25, 40, 55, 70, 85, 100]; //정시 25몀, 10분 25+15명....
                let 최종계산된분 = 0;

                for (let variable in 출발분) {
                    if (출발분[variable] > (대기인원 % 1200) % 100) { //대기인원이 출반분마다의 수용인원 범위 안에 있으면 break. 즉 break된 시간 분에 탑승
                        최종계산된분 = variable * 10; //0*10=정시, 1*10 =10분, 2*10= 20분...
                        break;
                    }
                }
                let date = new Date();
                최종계산된분 = 최종계산된분 + date.getMinutes();
                if (최종계산된분 > 60) {
                    최종계산된분 = 최종계산된분 - 60;
                    //시간에도 +1 해야 한다. 60분이 넘으면 시간이 한 시간씩 추가되니까
                    시 += 1;
                }

                분 = 최종계산된분; // 최종계산된분




                return `
            ${년 + 21}년 
            ${월 + 5}월
            ${일 + 10}일
            ${시}시
            ${분}분
            
            
            `;
            }
            console.log(배를건너는시간(대기인원));
        </script>
    </body>
</html>
